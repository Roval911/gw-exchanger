Этапы разработки
1. Проектирование и подготовка
   Изучить требования:

Курсы валют для USD, RUB, EUR.
Взаимодействие через gRPC.
Хранение данных в PostgreSQL.
Логирование и использование переменных окружения из config.env.
Настроить окружение:

Установить PostgreSQL.
Убедиться, что Go и gRPC доступны в системе.
Создать структуру проекта: Использовать предложенную структуру:

go
Копировать код
gw-exchanger/
├── cmd/
│     └── main.go
├── pkg/
│     ├── utils.go
├── internal/
│     ├── storages/
│     │   ├── storage.go (интерфейс)
│     │   ├── model.go
│     │   └── postgres/
│     │        ├── connector.go
│     │        └── methods.go
│     ├── config/
│     │    ├── config.go
│     │    └── defaults.go
├── go.mod
├── Dockerfile
├── config.env
├── Makefile
└── README.md

2. Конфигурация и зависимости
   Настроить переменные окружения:

Создать файл config.env для хранения настроек:

env
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=currency
LOG_LEVEL=info

Конфигурационный модуль:

В internal/config:
Реализовать парсер переменных окружения.
Задать значения по умолчанию.
Добавить зависимости:

В go.mod:
grpc и protobuf для RPC.
pq или pgx для работы с PostgreSQL.
Логгер, например, zap или logrus.

3. Моделирование и интерфейсы
   Модель данных: В internal/storages/model.go описать структуру валютного курса:


type CurrencyRate struct {
    ID        int       `json:"id"`
    From      string    `json:"from"`
    To        string    `json:"to"`
    Rate      float64   `json:"rate"`
}
Интерфейс хранилища: В internal/storages/storage.go определить интерфейс:



type Storage interface {
    GetRate(from, to string) (CurrencyRate, error)
}

4. Реализация работы с PostgreSQL
   Подключение: В internal/storages/postgres/connector.go:

Реализовать подключение к базе данных.
Методы работы: В internal/storages/postgres/methods.go:

Реализовать метод получения курса валют:
go
Копировать код
func (p *PostgresStorage) GetRate(from, to string) (CurrencyRate, error)

5. gRPC сервер
   Определить gRPC протокол:

Создать файл proto/exchanger.proto:

syntax = "proto3";

service Exchanger {
rpc GetRate (RateRequest) returns (RateResponse);
}

message RateRequest {
string from = 1;
string to = 2;
}

message RateResponse {
string from = 1;
string to = 2;
double rate = 3;
}
Сгенерировать код gRPC:

Использовать protoc для генерации Go-кода.
Реализация сервера:

В cmd/main.go:
Настроить сервер gRPC.
Реализовать хендлер для GetRate.
6. Логирование
   В pkg/utils.go:

Реализовать утилиту для инициализации логгера с уровнями.
Использовать logrus или zap.
Добавить логирование:

Подключение к базе.
Запросы на получение курсов валют.
Ошибки.
7. Docker и Makefile
   Dockerfile:

Создать образ с сервисом.
Добавить инструкции для сборки Go-приложения.
Makefile:

Добавить команды для:
Сборки: build.
Запуска: run.
Тестирования: test.
8. Тестирование
   Юнит-тесты:

Протестировать модуль работы с БД.
Протестировать gRPC сервер.
Интеграционные тесты:

Проверить взаимодействие gRPC и базы данных.
9. Документация
   Описать:

Запуск сервиса.
Использование gRPC методов.
Переменные окружения.
Поместить в README.md.